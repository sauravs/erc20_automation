# Aderyn Analysis Report

This report was generated by [Aderyn](https://github.com/Cyfrin/aderyn), a static analysis tool built by [Cyfrin](https://cyfrin.io), a blockchain security company. This report is not a substitute for manual audit or security review. It should not be relied upon for any purpose other than to assist in the identification of potential security vulnerabilities.
# Table of Contents

- [Summary](#summary)
  - [Files Summary](#files-summary)
  - [Files Details](#files-details)
  - [Issue Summary](#issue-summary)
- [Low Issues](#low-issues)
  - [L-1: Centralization Risk for trusted owners](#l-1-centralization-risk-for-trusted-owners)
  - [L-2: Unsafe ERC20 Operations should not be used](#l-2-unsafe-erc20-operations-should-not-be-used)
  - [L-3: Missing checks for `address(0)` when assigning values to address state variables](#l-3-missing-checks-for-address0-when-assigning-values-to-address-state-variables)
  - [L-4: `public` functions not used internally could be marked `external`](#l-4-public-functions-not-used-internally-could-be-marked-external)
  - [L-5: Internal functions called only once can be inlined](#l-5-internal-functions-called-only-once-can-be-inlined)


# Summary

## Files Summary

| Key | Value |
| --- | --- |
| .sol Files | 5 |
| Total nSLOC | 497 |


## Files Details

| Filepath | nSLOC |
| --- | --- |
| src/BasicModuleFactory.sol | 76 |
| src/CodeSnippet.sol | 193 |
| src/FlashMintFactory.sol | 76 |
| src/PermitAndFMFactory.sol | 76 |
| src/PermitFactory.sol | 76 |
| **Total** | **497** |


## Issue Summary

| Category | No. of Issues |
| --- | --- |
| High | 0 |
| Low | 5 |


# Low Issues

## L-1: Centralization Risk for trusted owners

Contracts have owners with privileged rights to perform admin tasks and need to be trusted to not perform malicious updates or drain funds.

<details><summary>21 Found Instances</summary>


- Found in src/BasicModuleFactory.sol [Line: 13](src/BasicModuleFactory.sol#L13)

	```solidity
	contract BasicModuleFactory is Ownable {
	```

- Found in src/BasicModuleFactory.sol [Line: 118](src/BasicModuleFactory.sol#L118)

	```solidity
	    function updateDeploymentFee(uint256 _newFee) external onlyOwner {
	```

- Found in src/BasicModuleFactory.sol [Line: 126](src/BasicModuleFactory.sol#L126)

	```solidity
	    function updateFeeToken(IERC20 _newFeeToken) external onlyOwner {
	```

- Found in src/BasicModuleFactory.sol [Line: 134](src/BasicModuleFactory.sol#L134)

	```solidity
	    function updateFeeCollector(address _newFeeCollector) external onlyOwner {
	```

- Found in src/CodeSnippet.sol [Line: 15](src/CodeSnippet.sol#L15)

	```solidity
	contract BasicFeatureContract is ERC20, ERC20Burnable, ERC20Pausable, Ownable {
	```

- Found in src/CodeSnippet.sol [Line: 82](src/CodeSnippet.sol#L82)

	```solidity
	    function mint(address to, uint256 amount) external onlyOwner {
	```

- Found in src/CodeSnippet.sol [Line: 104](src/CodeSnippet.sol#L104)

	```solidity
	    function pause() external onlyOwner {
	```

- Found in src/CodeSnippet.sol [Line: 112](src/CodeSnippet.sol#L112)

	```solidity
	    function unpause() external onlyOwner {
	```

- Found in src/CodeSnippet.sol [Line: 141](src/CodeSnippet.sol#L141)

	```solidity
	    function renounceOwnership() public virtual override onlyOwner {
	```

- Found in src/FlashMintFactory.sol [Line: 13](src/FlashMintFactory.sol#L13)

	```solidity
	contract FlashMintFactory is Ownable {
	```

- Found in src/FlashMintFactory.sol [Line: 118](src/FlashMintFactory.sol#L118)

	```solidity
	    function updateDeploymentFee(uint256 _newFee) external onlyOwner {
	```

- Found in src/FlashMintFactory.sol [Line: 126](src/FlashMintFactory.sol#L126)

	```solidity
	    function updateFeeToken(IERC20 _newFeeToken) external onlyOwner {
	```

- Found in src/FlashMintFactory.sol [Line: 134](src/FlashMintFactory.sol#L134)

	```solidity
	    function updateFeeCollector(address _newFeeCollector) external onlyOwner {
	```

- Found in src/PermitAndFMFactory.sol [Line: 13](src/PermitAndFMFactory.sol#L13)

	```solidity
	contract PermitAndFMFactory is Ownable {
	```

- Found in src/PermitAndFMFactory.sol [Line: 118](src/PermitAndFMFactory.sol#L118)

	```solidity
	    function updateDeploymentFee(uint256 _newFee) external onlyOwner {
	```

- Found in src/PermitAndFMFactory.sol [Line: 126](src/PermitAndFMFactory.sol#L126)

	```solidity
	    function updateFeeToken(IERC20 _newFeeToken) external onlyOwner {
	```

- Found in src/PermitAndFMFactory.sol [Line: 134](src/PermitAndFMFactory.sol#L134)

	```solidity
	    function updateFeeCollector(address _newFeeCollector) external onlyOwner {
	```

- Found in src/PermitFactory.sol [Line: 13](src/PermitFactory.sol#L13)

	```solidity
	contract PermitFactory is Ownable {
	```

- Found in src/PermitFactory.sol [Line: 118](src/PermitFactory.sol#L118)

	```solidity
	    function updateDeploymentFee(uint256 _newFee) external onlyOwner {
	```

- Found in src/PermitFactory.sol [Line: 126](src/PermitFactory.sol#L126)

	```solidity
	    function updateFeeToken(IERC20 _newFeeToken) external onlyOwner {
	```

- Found in src/PermitFactory.sol [Line: 134](src/PermitFactory.sol#L134)

	```solidity
	    function updateFeeCollector(address _newFeeCollector) external onlyOwner {
	```

</details>



## L-2: Unsafe ERC20 Operations should not be used

ERC20 functions may not behave as expected. For example: return values are not always meaningful. It is recommended to use OpenZeppelin's SafeERC20 library.

<details><summary>4 Found Instances</summary>


- Found in src/BasicModuleFactory.sol [Line: 95](src/BasicModuleFactory.sol#L95)

	```solidity
	            feeToken.transferFrom(msg.sender, feeCollector, deploymentFee),
	```

- Found in src/FlashMintFactory.sol [Line: 95](src/FlashMintFactory.sol#L95)

	```solidity
	            feeToken.transferFrom(msg.sender, feeCollector, deploymentFee),
	```

- Found in src/PermitAndFMFactory.sol [Line: 95](src/PermitAndFMFactory.sol#L95)

	```solidity
	            feeToken.transferFrom(msg.sender, feeCollector, deploymentFee),
	```

- Found in src/PermitFactory.sol [Line: 95](src/PermitFactory.sol#L95)

	```solidity
	            feeToken.transferFrom(msg.sender, feeCollector, deploymentFee),
	```

</details>



## L-3: Missing checks for `address(0)` when assigning values to address state variables

Check for `address(0)` when assigning values to address state variables.

<details><summary>16 Found Instances</summary>


- Found in src/BasicModuleFactory.sol [Line: 48](src/BasicModuleFactory.sol#L48)

	```solidity
	        feeToken = IERC20(_feeToken);
	```

- Found in src/BasicModuleFactory.sol [Line: 50](src/BasicModuleFactory.sol#L50)

	```solidity
	        feeCollector = _feeCollector;
	```

- Found in src/BasicModuleFactory.sol [Line: 127](src/BasicModuleFactory.sol#L127)

	```solidity
	        feeToken = _newFeeToken;
	```

- Found in src/BasicModuleFactory.sol [Line: 135](src/BasicModuleFactory.sol#L135)

	```solidity
	        feeCollector = _newFeeCollector;
	```

- Found in src/FlashMintFactory.sol [Line: 48](src/FlashMintFactory.sol#L48)

	```solidity
	        feeToken = IERC20(_feeToken);
	```

- Found in src/FlashMintFactory.sol [Line: 50](src/FlashMintFactory.sol#L50)

	```solidity
	        feeCollector = _feeCollector;
	```

- Found in src/FlashMintFactory.sol [Line: 127](src/FlashMintFactory.sol#L127)

	```solidity
	        feeToken = _newFeeToken;
	```

- Found in src/FlashMintFactory.sol [Line: 135](src/FlashMintFactory.sol#L135)

	```solidity
	        feeCollector = _newFeeCollector;
	```

- Found in src/PermitAndFMFactory.sol [Line: 48](src/PermitAndFMFactory.sol#L48)

	```solidity
	        feeToken = IERC20(_feeToken);
	```

- Found in src/PermitAndFMFactory.sol [Line: 50](src/PermitAndFMFactory.sol#L50)

	```solidity
	        feeCollector = _feeCollector;
	```

- Found in src/PermitAndFMFactory.sol [Line: 127](src/PermitAndFMFactory.sol#L127)

	```solidity
	        feeToken = _newFeeToken;
	```

- Found in src/PermitAndFMFactory.sol [Line: 135](src/PermitAndFMFactory.sol#L135)

	```solidity
	        feeCollector = _newFeeCollector;
	```

- Found in src/PermitFactory.sol [Line: 48](src/PermitFactory.sol#L48)

	```solidity
	        feeToken = IERC20(_feeToken);
	```

- Found in src/PermitFactory.sol [Line: 50](src/PermitFactory.sol#L50)

	```solidity
	        feeCollector = _feeCollector;
	```

- Found in src/PermitFactory.sol [Line: 127](src/PermitFactory.sol#L127)

	```solidity
	        feeToken = _newFeeToken;
	```

- Found in src/PermitFactory.sol [Line: 135](src/PermitFactory.sol#L135)

	```solidity
	        feeCollector = _newFeeCollector;
	```

</details>



## L-4: `public` functions not used internally could be marked `external`

Instead of marking a function as `public`, consider marking it as `external` if it is not used internally.

<details><summary>2 Found Instances</summary>


- Found in src/CodeSnippet.sol [Line: 96](src/CodeSnippet.sol#L96)

	```solidity
	    function burn(uint256 amount) public override {
	```

- Found in src/CodeSnippet.sol [Line: 141](src/CodeSnippet.sol#L141)

	```solidity
	    function renounceOwnership() public virtual override onlyOwner {
	```

</details>



## L-5: Internal functions called only once can be inlined

Instead of separating the logic into a separate function, consider inlining the logic into the calling function. This can reduce the number of function calls and improve readability.

<details><summary>4 Found Instances</summary>


- Found in src/BasicModuleFactory.sol [Line: 107](src/BasicModuleFactory.sol#L107)

	```solidity
	    function isContractDeployed(address _contract) internal view returns (bool) {
	```

- Found in src/FlashMintFactory.sol [Line: 107](src/FlashMintFactory.sol#L107)

	```solidity
	    function isContractDeployed(address _contract) internal view returns (bool) {
	```

- Found in src/PermitAndFMFactory.sol [Line: 107](src/PermitAndFMFactory.sol#L107)

	```solidity
	    function isContractDeployed(address _contract) internal view returns (bool) {
	```

- Found in src/PermitFactory.sol [Line: 107](src/PermitFactory.sol#L107)

	```solidity
	    function isContractDeployed(address _contract) internal view returns (bool) {
	```

</details>



